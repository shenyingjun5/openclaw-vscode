# Diff Preview UI è§†è§‰è®¾è®¡æ–¹æ¡ˆï¼ˆåŸºäºæ–¹æ¡ˆ Aï¼‰

## ä¸€ã€å®Œæ•´è§†è§‰ç¨¿

### 1.1 æ­£å¸¸çŠ¶æ€ï¼ˆä¸­æ–‡ç¯å¢ƒï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ’¬ AI å›å¤                                              â”‚
â”‚                                                         â”‚
â”‚ æˆ‘å·²ç»é‡æ„äº† Header ç»„ä»¶ï¼Œå°†å·¥å…·å‡½æ•°æå–åˆ°ç‹¬ç«‹æ–‡ä»¶ã€‚      â”‚
â”‚                                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ“ æ–‡ä»¶å˜æ›´                           3 ä¸ªæ–‡ä»¶       â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚                                                     â”‚ â”‚
â”‚ â”‚ ğŸ“ src/components/Header.tsx (ä¿®æ”¹)        âœ“    âœ—  â”‚ â”‚
â”‚ â”‚ â• src/utils/helpers.ts (åˆ›å»º)              âœ“    âœ—  â”‚ â”‚
â”‚ â”‚ ğŸ—‘ï¸ src/legacy/oldUtils.js (åˆ é™¤)           âœ“    âœ—  â”‚ â”‚
â”‚ â”‚                                                     â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚                  [ å…¨éƒ¨æ¥å— ]  [ å…¨éƒ¨æ‹’ç» ]         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 è‹±æ–‡ç¯å¢ƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ’¬ AI Response                                          â”‚
â”‚                                                         â”‚
â”‚ I've refactored the Header component and extracted...  â”‚
â”‚                                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ“ File Changes                       3 files       â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚                                                     â”‚ â”‚
â”‚ â”‚ ğŸ“ src/components/Header.tsx (Modify)      âœ“    âœ—  â”‚ â”‚
â”‚ â”‚ â• src/utils/helpers.ts (Create)            âœ“    âœ—  â”‚ â”‚
â”‚ â”‚ ğŸ—‘ï¸ src/legacy/oldUtils.js (Delete)         âœ“    âœ—  â”‚ â”‚
â”‚ â”‚                                                     â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚                 [ Accept All ]  [ Reject All ]      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3 è¶…é•¿æ–‡ä»¶åå¤„ç†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ“ æ–‡ä»¶å˜æ›´                           5 ä¸ªæ–‡ä»¶       â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚                                                     â”‚ â”‚
â”‚ â”‚ ğŸ“ src/Header.tsx (ä¿®æ”¹)                   âœ“    âœ—  â”‚ â”‚
â”‚ â”‚ ğŸ“ src/components/...Layout.tsx (ä¿®æ”¹)     âœ“    âœ—  â”‚ â”‚  â† è‡ªåŠ¨çœç•¥
â”‚ â”‚    â†‘ Hover: src/components/feature/admin/Dashboard â”‚ â”‚
â”‚ â”‚              Layout.tsx                            â”‚ â”‚
â”‚ â”‚ â• src/utils/helpers.ts (åˆ›å»º)              âœ“    âœ—  â”‚ â”‚
â”‚ â”‚ ğŸ“ src/...ponents/Button.tsx (ä¿®æ”¹)        âœ“    âœ—  â”‚ â”‚  â† çœç•¥å‰é¢
â”‚ â”‚ ğŸ—‘ï¸ old.js (åˆ é™¤)                            âœ“    âœ—  â”‚ â”‚
â”‚ â”‚                                                     â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚                  [ å…¨éƒ¨æ¥å— ]  [ å…¨éƒ¨æ‹’ç» ]         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.4 éƒ¨åˆ†åº”ç”¨çŠ¶æ€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ“ æ–‡ä»¶å˜æ›´                      1/3 å·²åº”ç”¨          â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚                                                     â”‚ â”‚
â”‚ â”‚ ğŸ“ src/components/Header.tsx (ä¿®æ”¹)        âœ…       â”‚ â”‚  â† å·²åº”ç”¨
â”‚ â”‚ â• src/utils/helpers.ts (åˆ›å»º)              âœ“    âœ—  â”‚ â”‚  â† å¾…å¤„ç†
â”‚ â”‚ ğŸ—‘ï¸ src/legacy/oldUtils.js (åˆ é™¤)           â­ï¸       â”‚ â”‚  â† å·²è·³è¿‡
â”‚ â”‚                                                     â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚                  [ å…¨éƒ¨æ¥å— ]  [ å…¨éƒ¨æ‹’ç» ]         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.5 å…¨éƒ¨åº”ç”¨å

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ“ æ–‡ä»¶å˜æ›´                      3/3 å·²åº”ç”¨  âœ…      â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚                                                     â”‚ â”‚
â”‚ â”‚ ğŸ“ src/components/Header.tsx (ä¿®æ”¹)        âœ…       â”‚ â”‚
â”‚ â”‚ â• src/utils/helpers.ts (åˆ›å»º)              âœ…       â”‚ â”‚
â”‚ â”‚ ğŸ—‘ï¸ src/legacy/oldUtils.js (åˆ é™¤)           âœ…       â”‚ â”‚
â”‚ â”‚                                                     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â”‚ âœ… æ‰€æœ‰å˜æ›´å·²åº”ç”¨æˆåŠŸ                                   â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## äºŒã€è¯¦ç»†å°ºå¯¸è§„èŒƒ

### 2.1 æ•´ä½“å¡ç‰‡

```css
.change-card {
    margin: 12px 0;
    border: 1px solid var(--vscode-panel-border);
    border-radius: 6px;
    background: var(--vscode-editor-background);
    overflow: hidden;
}
```

### 2.2 æ ‡é¢˜æ 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“ æ–‡ä»¶å˜æ›´                           3 ä¸ªæ–‡ä»¶          â”‚  â† é«˜åº¦ 40px
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†‘ 16px icon  â†‘ 14px åŠ ç²—æ–‡å­—            â†‘ 12px æ¬¡è¦ä¿¡æ¯
    
å·¦è¾¹è·ï¼š12px
å³è¾¹è·ï¼š12px
ä¸Šä¸‹å†…è¾¹è·ï¼š10px
```

```css
.change-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 12px;
    background: var(--vscode-sideBar-background);
    border-bottom: 1px solid var(--vscode-panel-border);
}

.change-title {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
    font-weight: 600;
    color: var(--vscode-foreground);
}

.change-count {
    font-size: 12px;
    color: var(--vscode-descriptionForeground);
}
```

### 2.3 æ–‡ä»¶åˆ—è¡¨é¡¹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“ src/components/Header.tsx (ä¿®æ”¹)        âœ“    âœ—       â”‚  â† é«˜åº¦ 36px
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†‘6px  â†‘16px      â†‘13px æ–‡ä»¶å              â†‘24x24  â†‘6px
  
æ€»é«˜åº¦ï¼š36px
å·¦è¾¹è·ï¼š12px
å³è¾¹è·ï¼š12px
ä¸Šä¸‹å†…è¾¹è·ï¼š6px
å›¾æ ‡é—´è·ï¼š6px
æŒ‰é’®é—´è·ï¼š8px
```

```css
.change-file {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 6px 12px;
    min-height: 36px;
    border-bottom: 1px solid var(--vscode-widget-border);
    transition: background 0.15s;
}

.change-file:last-child {
    border-bottom: none;
}

.change-file:hover .file-info {
    background: var(--vscode-list-hoverBackground);
}
```

### 2.4 æ–‡ä»¶ä¿¡æ¯åŒº

```css
.file-info {
    flex: 1;
    min-width: 0;
    display: flex;
    align-items: center;
    gap: 6px;
    cursor: pointer;
    padding: 4px 6px;
    margin: -4px -6px;  /* æ‰©å¤§ç‚¹å‡»åŒºåŸŸ */
    border-radius: 4px;
    transition: background 0.15s;
}

.file-icon {
    flex-shrink: 0;
    font-size: 16px;
    width: 16px;
    height: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.file-name {
    flex: 1;
    min-width: 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-family: var(--vscode-editor-font-family);
    font-size: 13px;
    color: var(--vscode-foreground);
}

.file-action {
    flex-shrink: 0;
    font-size: 12px;
    color: var(--vscode-descriptionForeground);
    opacity: 0.8;
}
```

### 2.5 æ“ä½œæŒ‰é’®

```
â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”
â”‚  âœ“   â”‚  â”‚  âœ—   â”‚
â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜
  24x24      24x24
  
é—´è·ï¼š8px
```

```css
.file-actions {
    display: flex;
    gap: 8px;
    flex-shrink: 0;
}

.icon-btn {
    width: 24px;
    height: 24px;
    padding: 0;
    border: 1px solid var(--vscode-input-border);
    background: transparent;
    border-radius: 3px;
    cursor: pointer;
    font-size: 13px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.15s;
    color: var(--vscode-foreground);
}

.icon-btn:hover {
    background: var(--vscode-button-hoverBackground);
}

.icon-btn.apply:hover {
    border-color: var(--vscode-charts-green);
    color: var(--vscode-charts-green);
    background: rgba(var(--vscode-charts-green-rgb), 0.1);
}

.icon-btn.skip:hover {
    border-color: var(--vscode-charts-red);
    color: var(--vscode-charts-red);
    background: rgba(var(--vscode-charts-red-rgb), 0.1);
}

.icon-btn:disabled {
    opacity: 0.4;
    cursor: not-allowed;
}
```

### 2.6 åº•éƒ¨æŒ‰é’®æ 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  [ å…¨éƒ¨æ¥å— ]  [ å…¨éƒ¨æ‹’ç» ]              â”‚  â† é«˜åº¦ 48px
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†‘ é—´è· 12px
```

```css
.change-footer {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 12px;
    padding: 12px;
    border-top: 1px solid var(--vscode-panel-border);
    background: var(--vscode-sideBar-background);
}

.batch-btn {
    padding: 6px 16px;
    min-width: 100px;
    height: 28px;
    border: 1px solid var(--vscode-button-border);
    border-radius: 4px;
    font-size: 13px;
    cursor: pointer;
    transition: all 0.15s;
    font-weight: 500;
}

.batch-btn.accept {
    background: var(--vscode-button-background);
    color: var(--vscode-button-foreground);
}

.batch-btn.accept:hover {
    background: var(--vscode-button-hoverBackground);
}

.batch-btn.reject {
    background: transparent;
    color: var(--vscode-foreground);
}

.batch-btn.reject:hover {
    background: var(--vscode-button-secondaryHoverBackground);
}

.batch-btn:disabled {
    opacity: 0.4;
    cursor: not-allowed;
}
```

---

## ä¸‰ã€çŠ¶æ€å›¾æ ‡è®¾è®¡

### 3.1 æ“ä½œç±»å‹å›¾æ ‡

| æ“ä½œ | å›¾æ ‡ | é¢œè‰² | è¯´æ˜ |
|------|------|------|------|
| ä¿®æ”¹ | ğŸ“ | é»˜è®¤ | modify |
| åˆ›å»º | â• | ç»¿è‰²å€¾å‘ | create |
| åˆ é™¤ | ğŸ—‘ï¸ | çº¢è‰²å€¾å‘ | delete |

### 3.2 æ“ä½œæŒ‰é’®å›¾æ ‡

| æ“ä½œ | å›¾æ ‡ | æ‚¬åœé¢œè‰² | å¿«æ·é”® |
|------|------|----------|--------|
| åº”ç”¨ | âœ“ | ç»¿è‰² | - |
| è·³è¿‡ | âœ— | çº¢è‰² | - |

### 3.3 çŠ¶æ€å›¾æ ‡

| çŠ¶æ€ | å›¾æ ‡ | è¯´æ˜ |
|------|------|------|
| å¾…å¤„ç† | âœ“ âœ— | æ˜¾ç¤ºæ“ä½œæŒ‰é’® |
| å·²åº”ç”¨ | âœ… | ç»¿è‰²å¯¹å‹¾ |
| å·²è·³è¿‡ | â­ï¸ | è·³è¿‡ç¬¦å· |

---

## å››ã€äº¤äº’çŠ¶æ€æœº

```
åˆå§‹çŠ¶æ€ï¼šå¾…å¤„ç†
   â”‚
   â”œâ”€â†’ [ç‚¹å‡»æ–‡ä»¶å] â†’ é¢„è§ˆ Diffï¼ˆä¸æ”¹å˜çŠ¶æ€ï¼‰
   â”‚
   â”œâ”€â†’ [ç‚¹å‡» âœ“] â†’ å·²åº”ç”¨ âœ…
   â”‚
   â”œâ”€â†’ [ç‚¹å‡» âœ—] â†’ å·²è·³è¿‡ â­ï¸
   â”‚
   â”œâ”€â†’ [ç‚¹å‡»å…¨éƒ¨æ¥å—] â†’ æ‰€æœ‰æ–‡ä»¶ â†’ å·²åº”ç”¨ âœ…
   â”‚
   â””â”€â†’ [ç‚¹å‡»å…¨éƒ¨æ‹’ç»] â†’ æ‰€æœ‰æ–‡ä»¶ â†’ å·²è·³è¿‡ â­ï¸

å·²åº”ç”¨ âœ…
   â”‚
   â””â”€â†’ [ç‚¹å‡»æ–‡ä»¶å] â†’ æ‰“å¼€æ–‡ä»¶ï¼ˆä¸æ˜¯ Diffï¼‰

å·²è·³è¿‡ â­ï¸
   â”‚
   â””â”€â†’ [ç‚¹å‡»æ–‡ä»¶å] â†’ æ— æ“ä½œï¼ˆæ·¡åŒ–æ˜¾ç¤ºï¼‰

è‡ªåŠ¨æ¥å—è§¦å‘æ¡ä»¶ï¼š
   - ç”¨æˆ·å‘é€æ–°æ¶ˆæ¯ï¼ˆéé˜Ÿåˆ—ï¼‰
   - å½“å‰ ChangeSet ä»æœ‰å¾…å¤„ç†æ–‡ä»¶
   â†’ è‡ªåŠ¨æ‰§è¡Œ [å…¨éƒ¨æ¥å—]
```

---

## äº”ã€å“åº”å¼æ–­ç‚¹

### 5.1 å®½åº¦å¤„ç†ç­–ç•¥

| å®¹å™¨å®½åº¦ | æ–‡ä»¶åæ˜¾ç¤º | æŒ‰é’®å¸ƒå±€ | è¯´æ˜ |
|----------|-----------|---------|------|
| > 400px | å®Œæ•´è·¯å¾„ | æ°´å¹³ | ç†æƒ³çŠ¶æ€ |
| 300-400px | æ™ºèƒ½çœç•¥ | æ°´å¹³ | çœç•¥ä¸­é—´éƒ¨åˆ† |
| < 300px | ä»…æ–‡ä»¶å | æ°´å¹³ | æé™ç´§å‡‘ |

### 5.2 çœç•¥ç®—æ³•

```typescript
function truncatePath(path: string, maxWidth: number): string {
    const parts = path.split('/');
    const filename = parts[parts.length - 1];
    
    // å¦‚æœæ€»é•¿åº¦å°äºæœ€å¤§å®½åº¦ï¼Œç›´æ¥è¿”å›
    if (path.length <= maxWidth) {
        return path;
    }
    
    // ä¿ç•™æ–‡ä»¶åï¼Œçœç•¥è·¯å¾„
    const dir = parts.slice(0, -1).join('/');
    
    // è®¡ç®—å¯ç”¨äºç›®å½•çš„å®½åº¦
    const availableWidth = maxWidth - filename.length - 4; // ".../"
    
    if (availableWidth < 10) {
        // ç©ºé—´ä¸å¤Ÿï¼Œåªæ˜¾ç¤ºæ–‡ä»¶å
        return `.../${filename}`;
    }
    
    // ä¿ç•™å¼€å¤´éƒ¨åˆ†
    const prefix = dir.substring(0, availableWidth);
    return `${prefix}.../${filename}`;
}
```

---

## å…­ã€Hover æ•ˆæœè®¾è®¡

### 6.1 æ–‡ä»¶å Hover

```
æ‚¬åœå‰ï¼š
ğŸ“ src/components/...Layout.tsx (ä¿®æ”¹)  âœ“  âœ—

æ‚¬åœæ—¶ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“ src/components/...Layout.tsx (ä¿®æ”¹) âœ“ âœ— â”‚
â”‚    â†“ æµ®å±‚æç¤º                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ src/components/feature/admin/        â”‚   â”‚
â”‚ â”‚ DashboardLayout.tsx                  â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ ·å¼ï¼š
- èƒŒæ™¯ï¼švar(--vscode-editorHoverWidget-background)
- è¾¹æ¡†ï¼švar(--vscode-editorHoverWidget-border)
- é˜´å½±ï¼š0 2px 8px rgba(0,0,0,0.2)
- å­—ä½“ï¼šç­‰å®½å­—ä½“
```

### 6.2 æŒ‰é’® Hover

```css
.icon-btn.apply:hover::before {
    content: "åº”ç”¨";  /* æˆ– "Apply" */
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    background: var(--vscode-editorHoverWidget-background);
    border: 1px solid var(--vscode-editorHoverWidget-border);
    padding: 4px 8px;
    border-radius: 3px;
    font-size: 11px;
    white-space: nowrap;
    margin-bottom: 4px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
}
```

---

## ä¸ƒã€åŠ¨ç”»æ•ˆæœ

### 7.1 çŠ¶æ€åˆ‡æ¢åŠ¨ç”»

```css
/* åº”ç”¨æˆåŠŸåŠ¨ç”» */
@keyframes apply-success {
    0% { 
        transform: scale(1);
        background: transparent;
    }
    50% { 
        transform: scale(1.05);
        background: rgba(var(--vscode-charts-green-rgb), 0.2);
    }
    100% { 
        transform: scale(1);
        background: transparent;
    }
}

.change-file.applied {
    animation: apply-success 0.3s ease-out;
}

/* è·³è¿‡æ·¡å‡ºåŠ¨ç”» */
@keyframes skip-fadeout {
    0% { opacity: 1; }
    100% { opacity: 0.5; }
}

.change-file.skipped {
    animation: skip-fadeout 0.2s ease-out forwards;
}
```

### 7.2 å¡ç‰‡å±•å¼€åŠ¨ç”»

```css
@keyframes slide-down {
    from {
        max-height: 0;
        opacity: 0;
    }
    to {
        max-height: 500px;
        opacity: 1;
    }
}

.change-card {
    animation: slide-down 0.3s ease-out;
}
```

---

## å…«ã€å¯è®¿é—®æ€§ï¼ˆA11yï¼‰

### 8.1 ARIA æ ‡ç­¾

```html
<div class="change-card" role="region" aria-label="æ–‡ä»¶å˜æ›´">
    <div class="change-header">
        <span class="change-title">
            <span aria-hidden="true">ğŸ“</span>
            <span>æ–‡ä»¶å˜æ›´</span>
        </span>
        <span class="change-count" aria-live="polite">3 ä¸ªæ–‡ä»¶</span>
    </div>
    
    <div class="change-files" role="list">
        <div class="change-file" role="listitem">
            <div class="file-info" 
                 role="button"
                 tabindex="0"
                 aria-label="é¢„è§ˆ src/components/Header.tsx çš„å˜æ›´">
                <span aria-hidden="true">ğŸ“</span>
                <span class="file-name">src/components/Header.tsx</span>
                <span class="file-action">(ä¿®æ”¹)</span>
            </div>
            <div class="file-actions">
                <button class="icon-btn apply"
                        aria-label="åº”ç”¨æ­¤æ–‡ä»¶çš„å˜æ›´"
                        title="åº”ç”¨">âœ“</button>
                <button class="icon-btn skip"
                        aria-label="è·³è¿‡æ­¤æ–‡ä»¶çš„å˜æ›´"
                        title="è·³è¿‡">âœ—</button>
            </div>
        </div>
    </div>
    
    <div class="change-footer">
        <button class="batch-btn accept"
                aria-label="åº”ç”¨æ‰€æœ‰æ–‡ä»¶çš„å˜æ›´">å…¨éƒ¨æ¥å—</button>
        <button class="batch-btn reject"
                aria-label="è·³è¿‡æ‰€æœ‰æ–‡ä»¶çš„å˜æ›´">å…¨éƒ¨æ‹’ç»</button>
    </div>
</div>
```

### 8.2 é”®ç›˜å¯¼èˆª

| æŒ‰é”® | æ“ä½œ |
|------|------|
| Tab | ç§»åŠ¨ç„¦ç‚¹ |
| Enter / Space | æ¿€æ´»æŒ‰é’® |
| Escape | å…³é—­å¡ç‰‡ï¼ˆå¯é€‰ï¼‰ |

---

## ä¹ã€å®Œæ•´ HTML æ¨¡æ¿

```html
<div class="change-card" data-changeset-id="${changesetId}">
    <!-- æ ‡é¢˜æ  -->
    <div class="change-header">
        <span class="change-title">
            <span class="change-icon">ğŸ“</span>
            <span class="change-title-text" data-i18n="diff.title">æ–‡ä»¶å˜æ›´</span>
        </span>
        <span class="change-count" aria-live="polite">
            <span class="applied-count">0</span>/<span class="total-count">3</span>
            <span data-i18n="diff.files">ä¸ªæ–‡ä»¶</span>
        </span>
    </div>
    
    <!-- æ–‡ä»¶åˆ—è¡¨ -->
    <div class="change-files">
        <!-- å•ä¸ªæ–‡ä»¶é¡¹ -->
        <div class="change-file" 
             data-path="src/components/Header.tsx"
             data-status="pending">
            
            <div class="file-info" 
                 role="button"
                 tabindex="0"
                 title="ç‚¹å‡»é¢„è§ˆå·®å¼‚">
                <span class="file-icon">ğŸ“</span>
                <span class="file-name">src/components/Header.tsx</span>
                <span class="file-action">
                    (<span data-i18n="diff.action.modify">ä¿®æ”¹</span>)
                </span>
            </div>
            
            <div class="file-actions">
                <button class="icon-btn apply"
                        aria-label="åº”ç”¨"
                        title="åº”ç”¨æ­¤å˜æ›´">âœ“</button>
                <button class="icon-btn skip"
                        aria-label="è·³è¿‡"
                        title="è·³è¿‡æ­¤å˜æ›´">âœ—</button>
            </div>
        </div>
        
        <!-- æ›´å¤šæ–‡ä»¶... -->
    </div>
    
    <!-- åº•éƒ¨æŒ‰é’® -->
    <div class="change-footer">
        <button class="batch-btn accept" 
                data-i18n="diff.acceptAll">å…¨éƒ¨æ¥å—</button>
        <button class="batch-btn reject"
                data-i18n="diff.rejectAll">å…¨éƒ¨æ‹’ç»</button>
    </div>
</div>
```

---

## åã€å›½é™…åŒ–æ–‡æœ¬

### webview/locales/zh.json
```json
{
  "diff.title": "æ–‡ä»¶å˜æ›´",
  "diff.files": "ä¸ªæ–‡ä»¶",
  "diff.action.create": "åˆ›å»º",
  "diff.action.modify": "ä¿®æ”¹",
  "diff.action.delete": "åˆ é™¤",
  "diff.status.pending": "å¾…å¤„ç†",
  "diff.status.applied": "å·²åº”ç”¨",
  "diff.status.skipped": "å·²è·³è¿‡",
  "diff.acceptAll": "å…¨éƒ¨æ¥å—",
  "diff.rejectAll": "å…¨éƒ¨æ‹’ç»",
  "diff.tooltip.preview": "ç‚¹å‡»é¢„è§ˆå·®å¼‚",
  "diff.tooltip.apply": "åº”ç”¨æ­¤å˜æ›´",
  "diff.tooltip.skip": "è·³è¿‡æ­¤å˜æ›´",
  "diff.allApplied": "æ‰€æœ‰å˜æ›´å·²åº”ç”¨æˆåŠŸ"
}
```

### webview/locales/en.json
```json
{
  "diff.title": "File Changes",
  "diff.files": "files",
  "diff.action.create": "Create",
  "diff.action.modify": "Modify",
  "diff.action.delete": "Delete",
  "diff.status.pending": "Pending",
  "diff.status.applied": "Applied",
  "diff.status.skipped": "Skipped",
  "diff.acceptAll": "Accept All",
  "diff.rejectAll": "Reject All",
  "diff.tooltip.preview": "Click to preview diff",
  "diff.tooltip.apply": "Apply changes",
  "diff.tooltip.skip": "Skip changes",
  "diff.allApplied": "All changes applied successfully"
}
```

---

## åä¸€ã€æš—è‰²ä¸»é¢˜æ•ˆæœ

```
Dark Theme (æš—è‰²ä¸»é¢˜)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ“ æ–‡ä»¶å˜æ›´                           3 ä¸ªæ–‡ä»¶       â”‚ â”‚  â† æ·±ç°èƒŒæ™¯
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚                                                     â”‚ â”‚  â† æ›´æ·±èƒŒæ™¯
â”‚ â”‚ ğŸ“ src/components/Header.tsx (ä¿®æ”¹)        âœ“    âœ—  â”‚ â”‚  â† ç™½è‰²æ–‡å­—
â”‚ â”‚ â• src/utils/helpers.ts (åˆ›å»º)              âœ“    âœ—  â”‚ â”‚
â”‚ â”‚ ğŸ—‘ï¸ src/legacy/oldUtils.js (åˆ é™¤)           âœ“    âœ—  â”‚ â”‚
â”‚ â”‚                                                     â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚                  [ å…¨éƒ¨æ¥å— ]  [ å…¨éƒ¨æ‹’ç» ]         â”‚ â”‚  â† æ·±ç°èƒŒæ™¯
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**è§†è§‰è®¾è®¡å®Œæˆæ—¶é—´**ï¼š2026-02-07  
**ç‰ˆæœ¬**ï¼šV2-Aï¼ˆåŸºäºæ–¹æ¡ˆ Aï¼‰  
**çŠ¶æ€**ï¼šå¾…å®¡æ ¸
